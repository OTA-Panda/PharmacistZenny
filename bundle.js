!function(t){var i={};function s(o){if(i[o])return i[o].exports;var e=i[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,i,o){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)s.d(o,e,function(i){return t[i]}.bind(null,e));return o},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=0)}([function(t,i,s){"use strict";s.r(i);class o{constructor(t,i,s,o,e){this.context=t,this.position=i,this.orientation=s,this.color=o,this.attached=!0,this.space=e}getPillAngle(t){switch(t){case"up":return-90;case"down":return 90;case"left":return 180;case"right":return 0}}getPillOrientation(){return this.orientation}setPillOrientation(t){return this.orientation=t,this}getPillPosition(){return this.position}setPillPosition(t){return this.position=t,this}draw(){let t=this.position.x,i=this.position.y,s=this.space,o=this.getPillAngle(this.orientation);const e=this.space/20,l=e/2;this.context.fillStyle=this.color,this.context.lineWidth=e,this.context.strokeStyle="black",this.context.save(),this.context.translate(t+s/2,i+s/2),this.context.rotate(Math.PI/180*o),this.context.translate(-t-s/2,-i-s/2),this.context.beginPath(),this.context.moveTo(t,i+l),this.context.lineTo(t+s/2,i+l),this.context.bezierCurveTo(t+.775*s,i+l,t+s-l,i+l+.225*s,t+s-l,i+s/2),this.context.bezierCurveTo(t+s-l,i+s-l-.225*s,t+.775*s,i+s-l,t+s/2,i+s-l),this.context.lineTo(t,i+s-l),this.context.closePath(),this.context.fill(),this.context.stroke(),this.context.restore()}}var e=class{constructor(t,i,s,e,l){this.context=t,this.bottle=i,this.position=s,this.space=l,this.connected=!0,this.active=!0,this.positionA=s,this.positionB={x:s.x+l,y:s.y},this.colorA=e[Math.random()*e.length|0],this.colorB=e[Math.random()*e.length|0],this.pillA=new o(t,this.positionA,"left",this.colorA,l),this.pillB=new o(t,this.positionB,"right",this.colorB,l)}getCoords(){return[this.pillA.getPillPosition().x,this.pillA.getPillPosition().y,this.pillB.getPillPosition().x,this.pillB.getPillPosition().y]}draw(){this.pillA.draw(),this.pillB.draw()}hasCollision(){const[t,i,s,o]=this.getCoords().map(t=>t/this.space);return 0!==this.bottle[i][t]||0!==this.bottle[o][s]}drop(){const[t,i,s,o]=this.getCoords();this.pillA.setPillPosition({x:t,y:i+this.space}),this.pillB.setPillPosition({x:s,y:o+this.space}),console.log(this.position.y),this.position.y+=this.space}land(){const[t,i,s,o]=this.getCoords();console.log([t,s]),this.bottle.fillSpace(t,i),this.bottle.fillSpace(s,o)}move(t){if(this.active){const[i,s,o,e]=this.getCoords();t>0?(this.pillA.setPillPosition({x:i+this.space,y:s}),this.pillB.setPillPosition({x:o+this.space,y:e})):(this.pillA.setPillPosition({x:i-this.space,y:s}),this.pillB.setPillPosition({x:o-this.space,y:e}))}}rotate(t){if(this.active)if(t>0)switch(this.pillA.getPillOrientation()){case"left":this.pillA.setPillPosition({x:this.position.x,y:this.position.y-this.space}).setPillOrientation("up"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("down");break;case"up":this.pillA.setPillPosition({x:this.position.x+this.space,y:this.position.y}).setPillOrientation("right"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("left");break;case"right":this.pillA.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("down"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y-this.space}).setPillOrientation("up");break;case"down":this.pillA.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("left"),this.pillB.setPillPosition({x:this.position.x+this.space,y:this.position.y}).setPillOrientation("right")}else switch(this.pillA.getPillOrientation()){case"left":this.pillA.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("down"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y-this.space}).setPillOrientation("up");break;case"down":this.pillA.setPillPosition({x:this.position.x+this.space,y:this.position.y}).setPillOrientation("right"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("left");break;case"right":this.pillA.setPillPosition({x:this.position.x,y:this.position.y-this.space}).setPillOrientation("up"),this.pillB.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("down");break;case"up":this.pillA.setPillPosition({x:this.position.x,y:this.position.y}).setPillOrientation("left"),this.pillB.setPillPosition({x:this.position.x+this.space,y:this.position.y}).setPillOrientation("right")}}};var l=class{constructor(t,i,s,o){this.ctx=t,this.space=i,this.width=s,this.height=o,this.field=this.create()}create(){let t=new Array(this.height);for(let i=0;i<t.length;i++)t[i]=new Array(this.width).fill(0);return t}fillSpace(t,i){return console.log([t,i]),this.field[t/this.space][i/this.space]=1}};const n=document.getElementById("bottle"),h=n.getContext("2d");h.scale(5,5);const r=["red","yellow","deepskyblue","green"];console.log(n);const a=new l(h,10,8,16);a.fillSpace(150,10),console.table(a.field);const p=new e(h,a.field,{x:10,y:140},r,10),c=new e(h,a.field,{x:0,y:60},r,10),P=new e(h,a.field,{x:0,y:80},r,10);p.draw(),c.draw(),P.draw(),console.log(p.hasCollision()),setTimeout(()=>{p.rotate(1),p.draw(),setTimeout(()=>{p.drop(),p.draw(),console.log(p.hasCollision()),console.log(`pill1 position: ${JSON.stringify(p.position)}`),setTimeout(()=>{p.draw(),console.log(p.hasCollision()),console.log(`pill1 position: ${JSON.stringify(p.position)}`),setTimeout(()=>{p.rotate(-1),p.move(-1),p.draw()},1e3)},2e3)},1e3)},1e3)}]);
//# sourceMappingURL=bundle.js.map